<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1 {
        text-align: center;
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Functional UI workshop

---

# Agenda

### * Functional UI
### * Data flow
### * Redux
### * Component structuring

---

# Functional UI
## Small building blocks
## Pure building blocks
## Testability

???

Pure bb: input->output, no side-effects

Testability is a consequence

---

# Unidirectional data flow

```
         +------+
         |      |
    +----> View +-----+
    |    |      |     |
    |    +------+     |
+---+---+        +----v---+
|       |        |        |
| Store <--------+ Action |
|       |        |        |
+-------+        +--------+
```

???

Basically the same in Redux as in Flux, only simpler

Some helpers in between: action creators, reducers

---

# Single state atom
## Single source of truth
## Data propagates down from the top
## Easy to follow data flow
## Core concept in Redux, possible in Flux

???

Single source: easy to know at any given point what the app state is.

Makes it possible for debug dumps of app state.

Guro: DRAW SOMETHING

---

# Why Redux?
## Encourages and enforces best-practices
## Active community
## Small API - easy to learn
## No dispatcher
## Time travel debugging

???

Best-practices: immutability, pure functions

Redux has 10300 stars on Github vs. Flux 9500

Redux without sanity checks: 100 LOC

"Cannot dispatch in the middle of a dispatch"

Time travel: made possible by immutability and single state atom

---

# App
## Advent Calendar
## Windows - text, image, Spotify, YouTube
## Admin panel where you can edit the calendar

???

It's Guro time!

---

class: middle

# Redux demo

???

* Action Creator
* Action
* Reducer
* Connecting a component


---

class: middle

# Work it! (part 1)

---

---

# API calls
## API calls belong in Action Creators
### * Reusability
### * Separation of concerns

???

* Stores do data transformations
* Components do data presentation

---

# API calls
## Example
```javascript
dispatch({ type: 'REQUEST_STARTED' });

request('/api', function (err, result) {
  if (err) {
    dispatch({ type: 'REQUEST_FAILED', err });
  } else {
    dispatch({ type: 'REQUEST_SUCCEDED', result });
  }
});
```

???

Redux example in README

---

# Presentation components
## Pure/stateless functions
## Input -> output - no side effects
## No internal state
## Renders DOM or other presentation components

???

A bonus is reusability

---

# Smart components
## Contain logic
## Can be connected to the store
## Do not render DOM (usually)

???

Sometimes rendering some DOM from a smart component makes sense - be pragmatic

---

# `this.setState`
--

## Sometimes it makes sense
--

## Things to consider
### * Do you want the data to be there after navigating to another page and back?
### * Do you need the data in another part of the app?
### * Do you need time travel?

???

Examples: forms, modal dialogs

---

class: middle

# Work it! (part 2)

---

---

class: middle

# Fin.

???

Thanks: Stian, Erik, Mikael

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
